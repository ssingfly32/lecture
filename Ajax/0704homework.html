<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <title>Document</title>
    <script>
      // ê³¼ì œ) http://www.mbn.co.kr/rss/enter/ ì—ì„œ xmlì„ ë¹„ë™ê¸° ì „ì†¡ ë°©ì‹ìœ¼ë¡œ ë°›ì•„, íŒŒì‹± í•˜ì—¬ ì¶œë ¥í•˜ë˜ ì¶œë ¥ì€ ë¶€íŠ¸ìŠ¤íŠ¸ë©ì˜ list group, collapse í™œìš©
      $(function () {
        transData();
      });
      function transData() {
        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        $.ajax({
          url: "http://www.mbn.co.kr/rss/enter/ ", // ë°ì´í„°ë¥¼ ìˆ˜ì‹ ë°›ì„ ì„œë²„ ì£¼ì†Œ // ê°ì²´ì¼ë• = ì‚¬ìš©x, : ì‚¬ìš©
          type: "get", // í†µì‹ ë°©ì‹(get, post, put, delete)
          dataType: "xml", // ìˆ˜ì‹ ë°›ì„ ë°ì´í„° íƒ€ì…
          async: false, // ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì§„í–‰ (default : true) ***********************************************************8
          success: function (data) {
            // í†µì‹ ì´ ì„±ê³µí–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°± í•¨ìˆ˜
            // console.log(data);
            parsingData(data);
          },
          error: function () {
            // í†µì‹ ì´ ì‹¤íŒ¨(ë¶€ì •ì ì¸ response) í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±í•¨ìˆ˜
          },
          complete: function () {}, // í†µì‹ ì´ ì™„ë£Œ ë˜ì—ˆì„ ë•Œ í˜¸ì¶œ ë˜ëŠ” ì½œë°±í•¨ìˆ˜
        });
      }
      function parsingData(xmlData) {
        let itemArray = xmlData.getElementsByTagName("item");
        let output = "";
        $.each(itemArray, function (i, item) {
          //
          let pubDate = $(item).find("pubDate").html();

          let link = $(item).find("link").html();
          console.log(link);
          let button = `<button type="button" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#demo${i}">ë”ë³´ê¸°</button>`;
          let title = $(item).find("title").html();
          // titleê³¼ description ì¶œë ¥
          // replaceí•¨ìˆ˜ë¡œ ë¶ˆí•„ìš”í•œ ë¬¸ì ëŒ€ì²´í•˜ê¸°
          let result = title.replace("<![CDATA[", "").replace("]]>", "");
          let description = $(item).find("description").html();
          let result1 = description.replace("<![CDATA[", "").replace("]]>", "");
          console.log(description);
          output += `<li class="list-group-item"><a href="${link}">${result}</a><br><br>${button}<br><br>${pubDate}`;
          output += `<div id=demo${i} class="collapse"><br>${result1}</div></li>`;
          $(".list-group").html(output);
        }); // ì•„ì´í…œ íƒœê·¸ë¥¼ ë§Œë‚ ë•Œë§ˆë‹¤ ë°˜ë³µ
      }
    </script>
    <style>
      a,
      h2 {
        color: black;
        font-weight: bold;
        text-decoration: none;
        font-size: 30px;
      }
    </style>
  </head>
  <body>
    <div class="container mt-3">
      <h2>MBN ì—°ì˜ˆ ê¸°ì‚¬ğŸ˜’ğŸ¤·â€â™‚ï¸ğŸ¤¦â€â™€ï¸</h2>
      <ul class="list-group"></ul>
      <a href="">xkdlx</a>
    </div>
  </body>
</html>
